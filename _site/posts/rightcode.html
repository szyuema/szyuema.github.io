<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8"/>
    <meta http-equiv="X-UA-Compatible" content="IE=edge"/>
    <meta name="viewport" content="width=device-width, initial-scale=1"/>
    <meta name="description" content="消除魔术字符串 - 马跃个人博客 - 作者:马跃"/> 
	<meta name="keywords" content="JS"/>
    <title>消除魔术字符串 - 马跃个人博客</title>
    <!-- Bootstrap Core CSS -->
    <link href="/css/bootstrap.min.css" rel="stylesheet"/>
    <!-- Custom CSS -->
    <link href="/css/blog.css" rel="stylesheet"/>
    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media
    queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file://
    -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js">
      </script>
      <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js">
      </script>
    <![endif]-->
        <!-- jQuery Version 1.11.0 -->
    <script src="/js/jquery-1.11.0.js"> </script>
    <!-- Bootstrap Core JavaScript -->
    <script src="/js/bootstrap.min.js"></script>
  </head>
  
  <body>
   
    <!-- Navigation -->
    <nav class="navbar navbar-inverse navbar-fixed-top" role="navigation">
      <div class="container">
        <!-- Brand and toggle get grouped for better mobile display -->
        <div class="navbar-header">
          <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
            <span class="sr-only">
              Toggle navigation
            </span>
            <span class="icon-bar">
            </span>
            <span class="icon-bar">
            </span>
            <span class="icon-bar">
            </span>
          </button>
          <a class="navbar-brand" href="/">
            首页
          </a>
        </div>
        <!-- Collect the nav links, forms, and other content for toggling -->
        <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
          		<ul class="nav navbar-nav">
			
				<li>
				  <a href="/posts/JS.html">
					JS
				  </a>
				</li>
			
				<li>
				  <a href="/posts/vue.html">
					vue学习
				  </a>
				</li>
			
				<li>
				  <a href="/posts/frame.html">
					框架学习
				  </a>
				</li>
			
				<li>
				  <a href="/posts/Node.html">
					Node
				  </a>
				</li>
			
				<li>
				  <a href="/posts/read.html">
					读书笔记
				  </a>
				</li>
			
				<li>
				  <a href="/posts/lifeother.html">
					生活杂记
				  </a>
				</li>
			
				<li>
				  <a href="/about.html">
					关于
				  </a>
				</li>
			
		</ul>  
        </div>
        <!-- /.navbar-collapse -->
      </div>
      <!-- /.container -->
    </nav>
    <!-- Page Content -->
    <div class="container">
      <div class="row">
        <!-- Blog Entries Column -->
        <div class="col-md-8">
          <!-- Navi -->
<a href="/">首页</a>&nbsp;>&nbsp;<a href="/posts/JS.html">JS</a>&nbsp;>&nbsp;正文
<!-- Title -->
<h2>消除魔术字符串</h2>
<b>标签：</b><a href="/tags.html#JS"><i>JS</i></a>
<div class="post-date">
	<span class="glyphicon glyphicon-time"></span>
	2016-12-16
</div>
<br/>
<hr>
<!-- adsense_468x60 -->
<div style="text-align:center;margin-top:15px;">
	 <!-- 请修改_includes/adsense_468x60.html添加广告代码。 --> 
</div>
<br/>

<!-- content -->
<div style="text-indent:2em;">
<p>魔术字符串实例</p>
<blockquote>
  <p>魔术字符串指的是，在代码之中多次出现、与代码形成强耦合的某一个具体的字符串或者数值。
风格良好的代码，应该尽量消除魔术字符串，该由含义清晰的变量代替。</p>
</blockquote>

<div class="language-javascript highlighter-rouge"><pre class="highlight"><code><span class="kd">function</span> <span class="nx">getArea</span><span class="p">(</span><span class="nx">shape</span><span class="p">,</span> <span class="nx">options</span><span class="p">)</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">area</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>

  <span class="k">switch</span> <span class="p">(</span><span class="nx">shape</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">case</span> <span class="s1">'Triangle'</span><span class="err">:</span> <span class="c1">// 魔术字符串</span>
      <span class="nx">area</span> <span class="o">=</span> <span class="p">.</span><span class="mi">5</span> <span class="o">*</span> <span class="nx">options</span><span class="p">.</span><span class="nx">width</span> <span class="o">*</span> <span class="nx">options</span><span class="p">.</span><span class="nx">height</span><span class="p">;</span>
      <span class="k">break</span><span class="p">;</span>
    <span class="cm">/* ... more code ... */</span>
  <span class="p">}</span>

  <span class="k">return</span> <span class="nx">area</span><span class="p">;</span>
<span class="p">}</span>

<span class="nx">getArea</span><span class="p">(</span><span class="s1">'Triangle'</span><span class="p">,</span> <span class="p">{</span> <span class="na">width</span><span class="p">:</span> <span class="mi">100</span><span class="p">,</span> <span class="na">height</span><span class="p">:</span> <span class="mi">100</span> <span class="p">});</span> <span class="c1">// 魔术字符串</span>
</code></pre>
</div>

<blockquote>
  <p>上面代码中，字符串“Triangle”就是一个魔术字符串。它多次出现，与代码形成“强耦合”，不利于将来的修改和维护。</p>
</blockquote>

<blockquote>
  <p>常用的消除魔术字符串的方法，就是把它写成一个变量。</p>
</blockquote>

<p>改进</p>

<blockquote>
  <p>我们把“Triangle”写成shapeType对象的triangle属性，这样就消除了强耦合。</p>
</blockquote>

<div class="language-javascript highlighter-rouge"><pre class="highlight"><code>
<span class="kd">var</span> <span class="nx">shapeType</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">triangle</span><span class="p">:</span> <span class="s1">'Triangle'</span>
<span class="p">};</span>

<span class="kd">function</span> <span class="nx">getArea</span><span class="p">(</span><span class="nx">shape</span><span class="p">,</span> <span class="nx">options</span><span class="p">)</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">area</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
  <span class="k">switch</span> <span class="p">(</span><span class="nx">shape</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">case</span> <span class="nx">shapeType</span><span class="p">.</span><span class="nx">triangle</span><span class="err">:</span>
      <span class="nx">area</span> <span class="o">=</span> <span class="p">.</span><span class="mi">5</span> <span class="o">*</span> <span class="nx">options</span><span class="p">.</span><span class="nx">width</span> <span class="o">*</span> <span class="nx">options</span><span class="p">.</span><span class="nx">height</span><span class="p">;</span>
      <span class="k">break</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="k">return</span> <span class="nx">area</span><span class="p">;</span>
<span class="p">}</span>

<span class="nx">getArea</span><span class="p">(</span><span class="nx">shapeType</span><span class="p">.</span><span class="nx">triangle</span><span class="p">,</span> <span class="p">{</span> <span class="na">width</span><span class="p">:</span> <span class="mi">100</span><span class="p">,</span> <span class="na">height</span><span class="p">:</span> <span class="mi">100</span> <span class="p">});</span>

</code></pre>
</div>


</div>

<br/>
<b>原创文章，转载请注明出处！</b>
<br/>
<b>本文链接：</b><a href="https://szyuema.github.io//posts/rightcode.html" title="">https://szyuema.github.io//posts/rightcode.html</a>

<!-- next and previous -->
<div style="margin-top:15px; margin-bottom:10px">
  
  <span class="next">
    上篇：
    <a href="/posts/gulp-es6Tes5.html">
      Gulp下es6转es5
    </a>
  </span>
   
  
</div>
<hr>
<!-- Blog Comments -->
<div class="media">
  <!-- 请修改_includes/comment.html添加评论代码。 --> 
</div>
        </div>
        <!-- Blog Sidebar Widgets Column -->
        <div class="col-md-4">
          <!-- Blog Categories Well -->
          <div class="well">
            <h4>
              栏目分类
            </h4>
            <div class="row">
                           <!-- 栏目分类 -->
              <div class="col-lg-6">
                <ul class="list-unstyled">
                  <li>
                    <a href="/posts/JS.html">
                      JS
                    </a>
                  </li>
                  <li>
                    <a href="/posts/vue.html">
                      vue
                    </a>
                  </li>
                  <li>
                    <a href="/posts/Node.html">
                      Node
                    </a>
                  </li>
                  <li>
                    <a href="/faqs.html">
                      FAQS
                    </a>
                  </li>
                </ul>
              </div>
              <!-- /.col-lg-6 -->
              <div class="col-lg-6">
                <ul class="list-unstyled">
                  <li>
                    <a href="/read.html">
                      读书笔记
                    </a>
                  </li>
                  <li>
                    <a href="/posts/other.html">
                      杂记
                    </a>
                  </li>
                     <li>
                    <a href="/archives.html">
                      存档
                    </a>
                  </li>
                </ul>
              </div>
              <!-- /.col-lg-6 -->
 
            </div>
            <!-- /.row -->
          </div>
          <!-- Side Widget Well -->
          <div class="well-ad">
            <!-- 请修改_includes/adsense.html添加广告代码。 --> 
          </div>
		  <!-- Blog Recent Well -->
          <div class="well">
            <h4>
              最新文章
            </h4>
			<div class="row">
                            <div class="col-lg-12">
                <ul class="list-unstyled">
				
                  <li>
                    <a href="/posts/rightcode.html">
                      消除魔术字符串
                    </a>
                  </li>
				
                  <li>
                    <a href="/posts/gulp-es6Tes5.html">
                      Gulp下es6转es5
                    </a>
                  </li>
				
                  <li>
                    <a href="/posts/test.html">
                      markdown demo
                    </a>
                  </li>
				
                  <li>
                    <a href="/posts/vue-means.html">
                      vue学习资料
                    </a>
                  </li>
				
                  <li>
                    <a href="/posts/reg.html">
                      常用正则
                    </a>
                  </li>
				
                  <li>
                    <a href="/posts/jsjl.html">
                      js积累
                    </a>
                  </li>
				
                  <li>
                    <a href="/posts/markdown-basics.html">
                      markdown 快速入门
                    </a>
                  </li>
				  
                </ul>
              </div> 
			</div>
          </div>
        </div>
      </div>
      <!-- /.row -->

      <!-- Footer -->
      <footer>
		<div style="text-align:center">
			<!-- 请修改_includes/adsense_728x90.html添加广告代码。 --> 
		</div>
        <div class="row">
          <div class="col-lg-12">
                        <div style="text-align:center;margin-top:15px;">
				Copyright &copy;  generated by szyuema, designed by <a href=" https://szyuema.github.io/">szyuema</a>. <a href="https://github.com/szyuema/szyuema.github.com">[source]</a>
				<br/>
				<!-- 请修改_includes/copyright.html添加统计代码。 -->
            </div>
 
          </div>
          <!-- /.col-lg-12 -->
        </div>
        <!-- /.row -->
      </footer>
    </div>
 <div >
            <div class="cb-search-tool" style="position: fixed; top: 0px ; bottom: 0px; left: 0px; right:  0px;
      opacity: 0.95; background-color: #111111; z-index: 9999; display: none;">
    <input type="text" class="form-control cb-search-content" id="cb-search-content" style="position: fixed; top: 60px" placeholder="文章标题 日期 标签" >

    <div style="position: fixed; top: 16px; right: 16px;">
        <img src="/search/img/cb-close.png"  id="cb-close-btn"/>
    </div>
</div>

<div style="position: fixed; right: 16px; top: 60px;">
    <img src="/search/img/cb-search.png"  id="cb-search-btn"  title="双击ctrl试一下"/>
</div>

<link rel="stylesheet" href="/search/css/cb-search.css">

<script src="/search/js/bootstrap3-typeahead.min.js"></script>
<script src="/search/js/cb-search.js"></script>
 
          </div>
    <!-- /.container -->
  </body>

</html>
